{% extends "course/nav.html" %}
{% block title %}HomePage{% endblock %}
{% block content %}
    {% load static %}
    <link href="{% static 'css/list.css' %}" rel="stylesheet">
    <div class="main-container">
        <div class="main-bar">
            <input class="input" id="search-key" type="text" name="search"/>
            <input class="button" type="button" value="搜索课程" onclick=""/>
            {% if view_kind != "select"%}
                <input class="button right-button" type="button" value="选课"  onclick='window.open("{% url 'view_course' 'select' %}")' />
            {% endif %}
            {% if view_kind != "withdraw"%}
                <input class="button right-button" type="button" value="撤课"  onclick='window.open("{% url 'view_course' 'withdraw' %}")' />
            {% endif %}
            {% if view_kind != "is_end"%}
                <input class="button right-button" type="button" value="查看结课课程"  onclick='window.open("{% url 'view_course' 'is_end' %}")' />
            {% endif %}
            {% if view_kind != "current"%}
                <input class="button right-button" type="button" value="查看当前课程"  onclick='window.open("{% url 'view_course' 'current' %}")' />
            {% endif %}
        </div>

        <table class="item-list course-list">
            <thead>
                <tr>
                    <th class="course-no">课程编号</th>
                    <th class="course-name">名称</th>
                    <th class="course-credit">学分</th>
                    <th class="course-number">当前人数<br>/总人数</th>
                    <th class="course-year">年份</th>
                    <th class="course-semester">学期</th>
                    <th class="course-teacher">教师</th>
                    <th class="course-schedule">上课时间</th>
                    {% if view_kind == "is_end"%}
                        <th class="course-score">得分</th>
                    {% else %}
                        <th class="course-operation">操作</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for course in course_list %}
                <tr id="course-id-{{ course.id }}">
                    <td class="course-no">{{ course.id }}</td>
                    <td class="course-name">{{ course.name }}</td>
                    <td class="course-credit">{{ course.credit }}</td>
                    <td class="course-number">{{ course.get_current_count }}/{{ course.max_number }}</td>
                    <td class="course-year">{{ course.year }}</td>
                    <td class="course-semester">{{ course.get_semester_display }}</td>
                    <td class="course-teacher">{{ course.teacher.name }}</td>
                    <td class="course-schedule"></td>
                    {% if view_kind == "is_end"%}
                        <td class="course-score">100</td>
                    {% else %}
                        <td class="course-operation">
                        {% if view_kind == "select"%}
                            <input class="button" type="button" value="选课"
                                   onclick='window.open("{% url 'operate_course' course.id 'select' %}")' />
                        {% endif %}
                        {% if view_kind == "withdraw"%}
                            <input class="button" type="button" value="撤课"
                                   onclick='window.open("{% url 'operate_course' course.id 'withdraw' %}")' />
                        {% endif %}
                        {% if view_kind == "current"%}
                            操作
                        {% endif %}
                        </td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>
{% endblock %}